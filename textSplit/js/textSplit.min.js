const normalizeKey=e=>{for(;e.indexOf("-")>0;){let t=e.indexOf("-");e=e.substring(0,t)+e.substring(t+1,t+2).toUpperCase()+e.substring(t+2,e.length)}return e},getCssProperty=(e,t,s)=>{for(val in e){let l=e[val].selectorText;if(void 0!==l&&l.indexOf(t)>=0&&null==l[l.indexOf(t)+t.length])for(i=0;i<e[val].style.length;i++){let t=normalizeKey(e[val].style[i]),l=e[val].style[t].replaceAll('"','\\"');s.push(JSON.parse(`{"${t}": "${l}"}`))}}},strRandom=e=>{let t=10,s="abcdefghijklmnopqrstuvwxyz",l="",n=0,i=""+s;for(e&&(e.startsWithLowerCase&&(l=s[Math.floor(26*Math.random())],n=1),e.length&&(t=e.length),e.includeUpperCase&&(i+=s.toUpperCase()),e.includeNumbers&&(i+="1234567890"));n<t;n++)l+=i[Math.floor(Math.random()*i.length)];return l};window.onload=()=>{document.querySelectorAll("p[data-split]").forEach(((e,t)=>{const s=e.getBoundingClientRect(),l=e.innerText,n=[];console.log(e.id,e.classList),getCssProperty(document.styleSheets[0].cssRules,e.id,n);const i=JSON.parse(e.attributes[0].value);(i.cut<0||i.cut>=1)&&(i.cut=.5,console.warn("Invalid 'cut' parameter, set to default : 0.5"));const o=e.parentNode,r=e.previousElementSibling;let a=i.cut?i.cut:.5;const d=document.createElement("div");r?r.insertAdjacentElement("afterend",d):o.appendChild(d),d.style.position="absolute",d.style.top=s.top+"px",d.style.left=s.left+"px",d.style.width=s.width+"px",d.style.height=s.height*a+"px",d.style.overflowY="hidden",d.id=strRandom({includeUpperCase:!0,includeNumbers:!0,length:5,startsWithLowerCase:!0});const c=document.createElement("div");d.insertAdjacentElement("afterend",c),c.style.position="absolute",c.style.top=s.bottom-s.height*(1-a)+"px",c.style.left=s.left+"px",c.style.width=s.width+"px",c.style.height=s.height*(1-a)+"px",c.style.overflowY="hidden",c.id=strRandom({includeUpperCase:!0,includeNumbers:!0,length:5,startsWithLowerCase:!0}),e.style.visibility="hidden",d.innerHTML=`<p>${l}</p>`,c.innerHTML=`<p>${l}</p>`;const p=d.querySelector("p"),h=c.querySelector("p");e.classList&&(e.classList.forEach((e=>p.classList.add(e))),e.classList.forEach((e=>h.classList.add(e)))),n.forEach((e=>{for(elt in e)p.style[elt]=`${e[elt]}`,h.style[elt]=`${e[elt]}`})),h.style.transform=`translateY(-${100*a}%)`,d.style.animation=`splitToTop ${i.dur}ms ${i.del}ms forwards ease`,c.style.animation=`splitToBottom ${i.dur}ms ${i.del}ms forwards ease`,d.addEventListener("animationend",(()=>{o.removeChild(d)})),c.addEventListener("animationend",(()=>{o.removeChild(c)}))}))};
